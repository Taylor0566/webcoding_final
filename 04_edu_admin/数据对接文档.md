# æ•™å­¦ç®¡ç†ç³»ç»Ÿ - å›¢é˜Ÿæ•°æ®å¯¹æ¥æ–‡æ¡£

> **è´Ÿè´£äººï¼šæ•™å­¦ç®¡ç†ç«¯ï¼ˆæ¨¡å—â‘£ï¼‰**  
> **ç‰ˆæœ¬ï¼šv1.0**  
> **æ›´æ–°æ—¥æœŸï¼š2024-12-22**

---

## ğŸ“Œ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ•°æ®å­˜å‚¨è§„èŒƒ](#æ•°æ®å­˜å‚¨è§„èŒƒ)
3. [æ•°æ®ç»“æ„è¯¦è§£](#æ•°æ®ç»“æ„è¯¦è§£)
4. [æ¨¡å—å¯¹æ¥è¯´æ˜](#æ¨¡å—å¯¹æ¥è¯´æ˜)
5. [ç¤ºä¾‹ä»£ç ](#ç¤ºä¾‹ä»£ç )
6. [æµ‹è¯•è´¦å·](#æµ‹è¯•è´¦å·)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ“– é¡¹ç›®æ¦‚è¿°

### æ¨¡å—åˆ†å·¥

| æ¨¡å— | è´Ÿè´£äºº | ä¸»è¦åŠŸèƒ½ | çŠ¶æ€ |
|------|--------|---------|------|
| â‘  å…¬å…±å‰ç«¯ | - | é¦–é¡µã€è¯¾ç¨‹æµè§ˆã€ç™»å½• | âœ… å·²å®Œæˆ |
| â‘¡ å­¦ç”Ÿç«¯ | é˜Ÿå‹â‘¡ | é€‰è¯¾ã€æŸ¥çœ‹è¯¾ç¨‹è¡¨ã€æŸ¥è¯¢æˆç»© | ğŸ”¨ å¼€å‘ä¸­ |
| â‘¢ æ•™å¸ˆç«¯ | é˜Ÿå‹â‘¢ | è¯¾ç¨‹ç®¡ç†ã€å¸ƒç½®ä½œä¸šã€å½•å…¥æˆç»© | ğŸ”¨ å¼€å‘ä¸­ |
| â‘£ æ•™å­¦ç®¡ç†ç«¯ | **ä½ ** | å­¦ç”Ÿ/æ•™å¸ˆ/è¯¾ç¨‹/ç­çº§/æ’è¯¾/æˆç»©å®¡æ ¸ | âœ… å·²å®Œæˆ |
| â‘¤ ç³»ç»Ÿç®¡ç†ç«¯ | é˜Ÿå‹â‘¤ | æ“ä½œæ—¥å¿—ã€æ•°æ®å¤‡ä»½ | ğŸ”¨ å¼€å‘ä¸­ |

### æ•°æ®æµå‘

```
æ•™å­¦ç®¡ç†ç«¯ï¼ˆä½ ï¼‰
    â†“ åˆ›å»ºåŸºç¡€æ•°æ®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   localStorage å…±äº«å­˜å‚¨    â”‚
â”‚  â€¢ å­¦ç”Ÿä¿¡æ¯                â”‚
â”‚  â€¢ æ•™å¸ˆä¿¡æ¯                â”‚
â”‚  â€¢ è¯¾ç¨‹ä¿¡æ¯                â”‚
â”‚  â€¢ æ’è¯¾ä¿¡æ¯ï¼ˆå«å­¦æœŸï¼‰      â”‚
â”‚  â€¢ é€‰è¯¾è®°å½•                â”‚
â”‚  â€¢ æˆç»©æ•°æ®                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ è¯»å–/å†™å…¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å­¦ç”Ÿç«¯      â”‚ æ•™å¸ˆç«¯  â”‚ ç³»ç»Ÿç«¯  â”‚
â”‚  â€¢ é€‰è¯¾       â”‚ â€¢ å½•æˆç»©â”‚ â€¢ è®°æ—¥å¿—â”‚
â”‚  â€¢ æŸ¥æˆç»©     â”‚ â€¢ æŸ¥å­¦ç”Ÿâ”‚ â€¢ å¤‡ä»½  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ æ•°æ®å­˜å‚¨è§„èŒƒ

### localStorage é”®åå¯¹ç…§è¡¨

| æ•°æ®ç±»å‹ | localStorage é”®å | è´Ÿè´£æ¨¡å— | è¯»å– | å†™å…¥ |
|---------|------------------|---------|------|------|
| **å­¦ç”Ÿä¿¡æ¯** | `edu_students` | æ•™å­¦ç®¡ç†ç«¯ | æ‰€æœ‰ | æ•™å­¦ç®¡ç†ç«¯ |
| **æ•™å¸ˆä¿¡æ¯** | `edu_teachers` | æ•™å­¦ç®¡ç†ç«¯ | æ‰€æœ‰ | æ•™å­¦ç®¡ç†ç«¯ |
| **è¯¾ç¨‹ä¿¡æ¯** | `edu_courses` | æ•™å­¦ç®¡ç†ç«¯ | æ‰€æœ‰ | æ•™å­¦ç®¡ç†ç«¯ |
| **ç­çº§ä¿¡æ¯** | `edu_classes` | æ•™å­¦ç®¡ç†ç«¯ | æ‰€æœ‰ | æ•™å­¦ç®¡ç†ç«¯ |
| **æ’è¯¾ä¿¡æ¯** | `edu_schedules` | æ•™å­¦ç®¡ç†ç«¯ | æ‰€æœ‰ | æ•™å­¦ç®¡ç†ç«¯ |
| **å­¦ç”Ÿé€‰è¯¾è®°å½•** | `edu_student_courses` | æ•™å­¦ç®¡ç†ç«¯ | æ‰€æœ‰ | å­¦ç”Ÿç«¯+æ•™å­¦ç®¡ç†ç«¯ |
| **æˆç»©æ•°æ®** | `edu_grades` | æ•™å­¦ç®¡ç†ç«¯ | æ‰€æœ‰ | æ•™å¸ˆç«¯+æ•™å­¦ç®¡ç†ç«¯ |
| **ç”¨æˆ·è´¦å·** | `grade_users` | å…¬å…±æ¨¡å— | æ‰€æœ‰ | æ‰€æœ‰ |
| **æ“ä½œæ—¥å¿—** | `grade_logs` | ç³»ç»Ÿç®¡ç†ç«¯ | ç³»ç»Ÿç®¡ç†ç«¯ | æ‰€æœ‰ |

### âš ï¸ é‡è¦çº¦å®š

1. **åªè¯»åŸåˆ™**ï¼šé™¤äº†è¡¨æ ¼ä¸­æ ‡æ³¨çš„"å†™å…¥"æƒé™ï¼Œå…¶ä»–æ¨¡å—åªèƒ½è¯»å–æ•°æ®
2. **å…ˆè¯»åå†™**ï¼šä¿®æ”¹æ•°æ®å‰å¿…é¡»å…ˆè¯»å–å®Œæ•´æ•°æ®ï¼Œä¿®æ”¹åå†å†™å›
3. **æ•°æ®éªŒè¯**ï¼šå†™å…¥å‰å¿…é¡»éªŒè¯æ•°æ®ç»“æ„ï¼Œé¿å…è¦†ç›–å…¶ä»–äººçš„æ•°æ®
4. **é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰ JSON æ“ä½œå¿…é¡»ç”¨ try-catch åŒ…è£¹

---

## ğŸ“Š æ•°æ®ç»“æ„è¯¦è§£

### 1. å­¦ç”Ÿä¿¡æ¯ (`edu_students`)

**æ•°æ®æ ¼å¼ï¼š** æ•°ç»„ `Array<Student>`

```javascript
[
    {
        id: 'S2021001',              // å­¦å·ï¼ˆä¸»é”®ï¼Œå¿…é¡»å”¯ä¸€ï¼‰
        name: 'å¼ ä¸‰',                // å§“å
        class: 'è®¡ç®—æœº2101',         // ç­çº§
        major: 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯',    // ä¸“ä¸š
        year: 2021,                  // å…¥å­¦å¹´ä»½
        status: 'åœ¨è¯»'               // çŠ¶æ€ï¼šåœ¨è¯»/ä¼‘å­¦/é€€å­¦/æ¯•ä¸š
    },
    // ... æ›´å¤šå­¦ç”Ÿ
]
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–å­¦ç”Ÿä¿¡æ¯
const students = JSON.parse(localStorage.getItem('edu_students')) || [];

// æ ¹æ®å­¦å·æŸ¥æ‰¾å­¦ç”Ÿ
const student = students.find(s => s.id === 'S2021001');

// æ ¹æ®ç­çº§ç­›é€‰å­¦ç”Ÿ
const classStudents = students.filter(s => s.class === 'è®¡ç®—æœº2101');
```

---

### 2. æ•™å¸ˆä¿¡æ¯ (`edu_teachers`)

**æ•°æ®æ ¼å¼ï¼š** æ•°ç»„ `Array<Teacher>`

```javascript
[
    {
        id: 'T001',                  // å·¥å·ï¼ˆä¸»é”®ï¼Œå¿…é¡»å”¯ä¸€ï¼‰
        name: 'ç‹æ•™æˆ',              // å§“å
        title: 'æ•™æˆ',               // èŒç§°ï¼šæ•™æˆ/å‰¯æ•™æˆ/è®²å¸ˆ
        department: 'è®¡ç®—æœºå­¦é™¢',     // é™¢ç³»
        contact: '13800138001'       // è”ç³»æ–¹å¼
    },
    // ... æ›´å¤šæ•™å¸ˆ
]
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–æ•™å¸ˆä¿¡æ¯
const teachers = JSON.parse(localStorage.getItem('edu_teachers')) || [];

// æ ¹æ®å·¥å·æŸ¥æ‰¾æ•™å¸ˆ
const teacher = teachers.find(t => t.id === 'T001');

// æ ¹æ®é™¢ç³»ç­›é€‰æ•™å¸ˆ
const deptTeachers = teachers.filter(t => t.department === 'è®¡ç®—æœºå­¦é™¢');
```

---

### 3. è¯¾ç¨‹ä¿¡æ¯ (`edu_courses`)

**æ•°æ®æ ¼å¼ï¼š** æ•°ç»„ `Array<Course>`

```javascript
[
    {
        code: 'CS101',               // è¯¾ç¨‹ä»£ç ï¼ˆä¸»é”®ï¼Œå¿…é¡»å”¯ä¸€ï¼‰
        name: 'æ•°æ®ç»“æ„ä¸ç®—æ³•',       // è¯¾ç¨‹åç§°
        credits: 4,                  // å­¦åˆ†
        hours: 64,                   // è¯¾æ—¶
        department: 'è®¡ç®—æœºå­¦é™¢',     // å¼€è¯¾é™¢ç³»
        status: 'å¼€è¯¾ä¸­'             // çŠ¶æ€ï¼šå¼€è¯¾ä¸­/å·²ç»“è¯¾/åœå¼€
    },
    // ... æ›´å¤šè¯¾ç¨‹
]
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–è¯¾ç¨‹ä¿¡æ¯
const courses = JSON.parse(localStorage.getItem('edu_courses')) || [];

// æ ¹æ®è¯¾ç¨‹ä»£ç æŸ¥æ‰¾è¯¾ç¨‹
const course = courses.find(c => c.code === 'CS101');

// ç­›é€‰å¼€è¯¾ä¸­çš„è¯¾ç¨‹
const activeCourses = courses.filter(c => c.status === 'å¼€è¯¾ä¸­');
```

---

### 4. æ’è¯¾ä¿¡æ¯ (`edu_schedules`) â­ é‡è¦

**æ•°æ®æ ¼å¼ï¼š** æ•°ç»„ `Array<Schedule>`

```javascript
[
    {
        id: 'SCH001',                    // æ’è¯¾IDï¼ˆä¸»é”®ï¼Œå¿…é¡»å”¯ä¸€ï¼‰
        courseCode: 'CS101',             // è¯¾ç¨‹ä»£ç 
        courseName: 'æ•°æ®ç»“æ„ä¸ç®—æ³•',     // è¯¾ç¨‹åç§°
        teacher: 'ç‹æ•™æˆ',                // æˆè¯¾æ•™å¸ˆï¼ˆå§“åï¼‰
        semester: '2024-2025-1',         // âš ï¸ å­¦æœŸï¼ˆå¿…é¡»å­—æ®µï¼‰
        time: 'å‘¨ä¸€ 1-2èŠ‚',               // ä¸Šè¯¾æ—¶é—´
        room: 'A101',                    // æ•™å®¤
        capacity: 80                     // å®¹é‡
        // æ³¨æ„ï¼šæ²¡æœ‰ enrolled å­—æ®µï¼Œå·²é€‰äººæ•°ç”±ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—
    },
    // ... æ›´å¤šæ’è¯¾
]
```

**âš ï¸ å­¦æœŸæ ¼å¼è§„èŒƒï¼š**

- ç¬¬ä¸€å­¦æœŸï¼š`'2024-2025-1'`
- ç¬¬äºŒå­¦æœŸï¼š`'2024-2025-2'`
- **å¿…é¡»åŒ…å« semester å­—æ®µï¼Œå¦åˆ™æ— æ³•æ­£ç¡®æ˜¾ç¤º**

**æ—¶é—´æ ¼å¼è§„èŒƒï¼š**

- æ ¼å¼ï¼š`'å‘¨X YèŠ‚'`
- ç¤ºä¾‹ï¼š`'å‘¨ä¸€ 1-2èŠ‚'`ã€`'å‘¨ä¸‰ 3-4èŠ‚'`

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–æ’è¯¾ä¿¡æ¯
const schedules = JSON.parse(localStorage.getItem('edu_schedules')) || [];

// æ ¹æ®å­¦æœŸç­›é€‰æ’è¯¾
const semester1 = schedules.filter(s => s.semester === '2024-2025-1');

// æŸ¥æ‰¾æŸé—¨è¯¾çš„æ’è¯¾ä¿¡æ¯
const courseSchedule = schedules.find(s => s.courseCode === 'CS101' && s.semester === '2024-2025-1');

// æŸ¥æ‰¾æŸä¸ªæ•™å¸ˆçš„è¯¾ç¨‹
const teacherSchedules = schedules.filter(s => s.teacher === 'ç‹æ•™æˆ');
```

---

### 5. å­¦ç”Ÿé€‰è¯¾è®°å½• (`edu_student_courses`) â­ é‡è¦

**æ•°æ®æ ¼å¼ï¼š** å¯¹è±¡ `Object<StudentId, CourseCode[]>`

```javascript
{
    'S2021001': ['CS101', 'CS102', 'MA101'],  // å¼ ä¸‰é€‰äº†3é—¨è¯¾
    'S2021002': ['CS101', 'CS103'],           // æå››é€‰äº†2é—¨è¯¾
    'S2021003': ['CS102', 'SE101'],           // ç‹äº”é€‰äº†2é—¨è¯¾
    // ... æ›´å¤šå­¦ç”Ÿçš„é€‰è¯¾è®°å½•
}
```

**âš ï¸ é‡è¦è¯´æ˜ï¼š**

1. é”®æ˜¯å­¦ç”ŸIDï¼ˆå­¦å·ï¼‰
2. å€¼æ˜¯è¯¾ç¨‹ä»£ç æ•°ç»„
3. **å­¦ç”Ÿç«¯é€‰è¯¾åå¿…é¡»æ›´æ–°è¿™ä¸ªæ•°æ®**
4. æ•™å­¦ç®¡ç†ç«¯æ ¹æ®è¿™ä¸ªæ•°æ®è‡ªåŠ¨è®¡ç®—æ¯é—¨è¯¾çš„å·²é€‰äººæ•°

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–é€‰è¯¾è®°å½•
const studentCourses = JSON.parse(localStorage.getItem('edu_student_courses')) || {};

// å­¦ç”Ÿé€‰è¯¾ï¼ˆå­¦ç”Ÿç«¯æ“ä½œï¼‰
const studentId = 'S2021001';
const selectedCourses = ['CS101', 'CS102', 'MA101'];
studentCourses[studentId] = selectedCourses;
localStorage.setItem('edu_student_courses', JSON.stringify(studentCourses));

// æŸ¥è¯¢æŸä¸ªå­¦ç”Ÿé€‰äº†å“ªäº›è¯¾
const myCourses = studentCourses['S2021001'] || [];

// ç»Ÿè®¡æŸé—¨è¯¾æœ‰å¤šå°‘å­¦ç”Ÿé€‰äº†
const courseCode = 'CS101';
let enrolledCount = 0;
Object.values(studentCourses).forEach(courses => {
    if (courses.includes(courseCode)) {
        enrolledCount++;
    }
});
console.log(`CS101 å·²é€‰äººæ•°ï¼š${enrolledCount}`);

// æŸ¥è¯¢é€‰äº†æŸé—¨è¯¾çš„æ‰€æœ‰å­¦ç”Ÿ
const enrolledStudents = Object.entries(studentCourses)
    .filter(([studentId, courses]) => courses.includes('CS101'))
    .map(([studentId]) => studentId);
```

---

### 6. æˆç»©æ•°æ® (`edu_grades`) â­ é‡è¦

**æ•°æ®æ ¼å¼ï¼š** æ•°ç»„ `Array<GradeRecord>`

```javascript
[
    {
        courseCode: 'CS101',             // è¯¾ç¨‹ä»£ç 
        courseName: 'æ•°æ®ç»“æ„ä¸ç®—æ³•',     // è¯¾ç¨‹åç§°
        teacher: 'ç‹æ•™æˆ',                // æˆè¯¾æ•™å¸ˆ
        studentCount: 65,                // å­¦ç”Ÿäººæ•°
        scores: [95, 92, 88, 90, ...],   // æˆç»©æ•°ç»„
        published: false                 // æ˜¯å¦å·²å‘å¸ƒï¼ˆé»˜è®¤falseï¼‰
    },
    // ... æ›´å¤šè¯¾ç¨‹æˆç»©
]
```

**âš ï¸ æˆç»©å‘å¸ƒæµç¨‹ï¼š**

1. **æ•™å¸ˆç«¯**ï¼šå½•å…¥æˆç»©ï¼Œ`published: false`
2. **æ•™å­¦ç®¡ç†ç«¯**ï¼šå®¡æ ¸æˆç»©ï¼Œæ£€æµ‹å¼‚å¸¸
3. **æ•™å­¦ç®¡ç†ç«¯**ï¼šå®¡æ ¸é€šè¿‡åè®¾ç½® `published: true`
4. **å­¦ç”Ÿç«¯**ï¼šåªèƒ½æŸ¥çœ‹ `published: true` çš„æˆç»©

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–æˆç»©æ•°æ®
const grades = JSON.parse(localStorage.getItem('edu_grades')) || [];

// æ•™å¸ˆç«¯ï¼šå½•å…¥æˆç»©
const newGrade = {
    courseCode: 'CS101',
    courseName: 'æ•°æ®ç»“æ„ä¸ç®—æ³•',
    teacher: 'ç‹æ•™æˆ',
    studentCount: 65,
    scores: [95, 92, 88, 90, 91, 93, 89, 94, ...], // 65ä¸ªå­¦ç”Ÿçš„æˆç»©
    published: false  // å½•å…¥åé»˜è®¤æœªå‘å¸ƒ
};
grades.push(newGrade);
localStorage.setItem('edu_grades', JSON.stringify(grades));

// å­¦ç”Ÿç«¯ï¼šæŸ¥è¯¢å·²å‘å¸ƒçš„æˆç»©
const publishedGrades = grades.filter(g => g.published === true);

// æ•™å­¦ç®¡ç†ç«¯ï¼šå‘å¸ƒæˆç»©
const gradeIndex = grades.findIndex(g => g.courseCode === 'CS101');
if (gradeIndex !== -1) {
    grades[gradeIndex].published = true;
    localStorage.setItem('edu_grades', JSON.stringify(grades));
}

// æˆç»©ç»Ÿè®¡åˆ†æ
const courseGrade = grades.find(g => g.courseCode === 'CS101');
if (courseGrade) {
    const scores = courseGrade.scores;
    const average = scores.reduce((sum, s) => sum + s, 0) / scores.length;
    const excellentCount = scores.filter(s => s >= 85).length;
    const passCount = scores.filter(s => s >= 60).length;
    const excellentRate = excellentCount / scores.length;
    const passRate = passCount / scores.length;
    
    console.log(`å¹³å‡åˆ†ï¼š${average.toFixed(2)}`);
    console.log(`ä¼˜ç§€ç‡ï¼š${(excellentRate * 100).toFixed(1)}%`);
    console.log(`åŠæ ¼ç‡ï¼š${(passRate * 100).toFixed(1)}%`);
}
```

---

### 7. ç”¨æˆ·è´¦å· (`grade_users`)

**æ•°æ®æ ¼å¼ï¼š** æ•°ç»„ `Array<User>`

```javascript
[
    {
        id: 'S001',                      // ç”¨æˆ·IDï¼ˆå­¦å·/å·¥å·ï¼‰
        name: 'å¼ ä¸‰',                    // å§“å
        role: 'student',                 // è§’è‰²ï¼šstudent/teacher/edu_admin/sys_admin
        passwordHash: '...',             // å¯†ç å“ˆå¸Œ
        salt: '...',                     // ç›å€¼
        email: 'zhangsan@szu.edu.cn',   // é‚®ç®±
        class: '2021çº§è®¡ç®—æœº1ç­',        // ç­çº§ï¼ˆä»…å­¦ç”Ÿï¼‰
        loginAttempts: 0,                // ç™»å½•å°è¯•æ¬¡æ•°
        lockUntil: 0                     // é”å®šæˆªæ­¢æ—¶é—´
    },
    // ... æ›´å¤šç”¨æˆ·
]
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–ç”¨æˆ·æ•°æ®
const users = JSON.parse(localStorage.getItem('grade_users')) || [];

// æ ¹æ®è§’è‰²ç­›é€‰ç”¨æˆ·
const students = users.filter(u => u.role === 'student');
const teachers = users.filter(u => u.role === 'teacher');
```

---

### 8. æ“ä½œæ—¥å¿— (`grade_logs`)

**æ•°æ®æ ¼å¼ï¼š** æ•°ç»„ `Array<Log>`

```javascript
[
    {
        id: 1639123456789,               // æ—¥å¿—IDï¼ˆæ—¶é—´æˆ³ï¼‰
        user: 'TA001',                   // æ“ä½œè€…ID
        action: 'å‘å¸ƒæˆç»© - CS101',      // æ“ä½œæè¿°
        time: '2024-12-22T10:30:00Z'     // æ—¶é—´ï¼ˆISOæ ¼å¼ï¼‰
    },
    // ... æ›´å¤šæ—¥å¿—
]
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```javascript
// è¯»å–æ—¥å¿—
const logs = JSON.parse(localStorage.getItem('grade_logs')) || [];

// æ·»åŠ æ“ä½œæ—¥å¿—ï¼ˆæ‰€æœ‰æ¨¡å—éƒ½åº”è¯¥è®°å½•é‡è¦æ“ä½œï¼‰
function addLog(userId, action) {
    const logs = JSON.parse(localStorage.getItem('grade_logs')) || [];
    logs.push({
        id: Date.now(),
        user: userId,
        action: action,
        time: new Date().toISOString()
    });
    localStorage.setItem('grade_logs', JSON.stringify(logs));
}

// ä½¿ç”¨ç¤ºä¾‹
addLog('TA001', 'åˆ›å»ºå­¦ç”Ÿ - S2021001');
addLog('T001', 'å½•å…¥æˆç»© - CS101');
addLog('TA001', 'å‘å¸ƒæˆç»© - CS101');
```

---

## ğŸ”— æ¨¡å—å¯¹æ¥è¯´æ˜

### å­¦ç”Ÿç«¯ï¼ˆæ¨¡å—â‘¡ï¼‰å¯¹æ¥

#### éœ€è¦è¯»å–çš„æ•°æ®

1. **`edu_courses`** - è¯¾ç¨‹åˆ—è¡¨ï¼ˆä¾›é€‰è¯¾ï¼‰
2. **`edu_schedules`** - æ’è¯¾ä¿¡æ¯ï¼ˆæŸ¥çœ‹ä¸Šè¯¾æ—¶é—´ã€æ•™å®¤ï¼‰
3. **`edu_student_courses`** - è‡ªå·±çš„é€‰è¯¾è®°å½•
4. **`edu_grades`** - æˆç»©æ•°æ®ï¼ˆåªæ˜¾ç¤º `published: true` çš„ï¼‰

#### éœ€è¦å†™å…¥çš„æ•°æ®

1. **`edu_student_courses`** - å­¦ç”Ÿé€‰è¯¾åæ›´æ–°è¿™é‡Œ

#### æ ¸å¿ƒåŠŸèƒ½å®ç°

**1. è¯¾ç¨‹æµè§ˆä¸æœç´¢**

```javascript
// è·å–æ‰€æœ‰å¼€è¯¾ä¸­çš„è¯¾ç¨‹
const courses = JSON.parse(localStorage.getItem('edu_courses')) || [];
const availableCourses = courses.filter(c => c.status === 'å¼€è¯¾ä¸­');

// æœç´¢è¯¾ç¨‹
function searchCourses(keyword) {
    return availableCourses.filter(c => 
        c.name.includes(keyword) || 
        c.code.includes(keyword) ||
        c.department.includes(keyword)
    );
}
```

**2. å­¦ç”Ÿé€‰è¯¾**

```javascript
function selectCourse(studentId, courseCode) {
    // è¯»å–é€‰è¯¾è®°å½•
    const studentCourses = JSON.parse(localStorage.getItem('edu_student_courses')) || {};
    
    // å¦‚æœè¯¥å­¦ç”Ÿè¿˜æ²¡æœ‰é€‰è¯¾è®°å½•ï¼Œåˆå§‹åŒ–ä¸ºç©ºæ•°ç»„
    if (!studentCourses[studentId]) {
        studentCourses[studentId] = [];
    }
    
    // æ£€æŸ¥æ˜¯å¦å·²é€‰è¿‡è¿™é—¨è¯¾
    if (studentCourses[studentId].includes(courseCode)) {
        alert('æ‚¨å·²ç»é€‰è¿‡è¿™é—¨è¯¾äº†ï¼');
        return false;
    }
    
    // æ£€æŸ¥å®¹é‡ï¼ˆå¯é€‰ï¼‰
    const schedules = JSON.parse(localStorage.getItem('edu_schedules')) || [];
    const schedule = schedules.find(s => s.courseCode === courseCode);
    if (schedule) {
        // ç»Ÿè®¡å·²é€‰äººæ•°
        let enrolled = 0;
        Object.values(studentCourses).forEach(courses => {
            if (courses.includes(courseCode)) enrolled++;
        });
        
        if (enrolled >= schedule.capacity) {
            alert('è¯¥è¯¾ç¨‹å·²æ»¡ï¼');
            return false;
        }
    }
    
    // æ·»åŠ é€‰è¯¾
    studentCourses[studentId].push(courseCode);
    localStorage.setItem('edu_student_courses', JSON.stringify(studentCourses));
    
    // è®°å½•æ“ä½œæ—¥å¿—
    addLog(studentId, `é€‰è¯¾ - ${courseCode}`);
    
    return true;
}
```

**3. æŸ¥çœ‹ä¸ªäººè¯¾ç¨‹è¡¨**

```javascript
function getMySchedule(studentId) {
    // è·å–æˆ‘é€‰çš„è¯¾ç¨‹
    const studentCourses = JSON.parse(localStorage.getItem('edu_student_courses')) || {};
    const myCourses = studentCourses[studentId] || [];
    
    // è·å–æ’è¯¾ä¿¡æ¯
    const schedules = JSON.parse(localStorage.getItem('edu_schedules')) || [];
    
    // ç­›é€‰å‡ºæˆ‘é€‰çš„è¯¾ç¨‹çš„æ’è¯¾ä¿¡æ¯
    const mySchedule = schedules.filter(s => myCourses.includes(s.courseCode));
    
    return mySchedule;
}

// ç”Ÿæˆè¯¾ç¨‹è¡¨HTML
function renderScheduleTable(studentId) {
    const mySchedule = getMySchedule(studentId);
    const weekdays = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”'];
    const periods = ['1-2èŠ‚', '3-4èŠ‚', '5-6èŠ‚', '7-8èŠ‚'];
    
    let html = '<table><thead><tr><th>æ—¶é—´</th>';
    weekdays.forEach(day => html += `<th>${day}</th>`);
    html += '</tr></thead><tbody>';
    
    periods.forEach(period => {
        html += `<tr><td>${period}</td>`;
        weekdays.forEach(day => {
            const course = mySchedule.find(s => s.time === `${day} ${period}`);
            if (course) {
                html += `<td>${course.courseName}<br>${course.teacher}<br>${course.room}</td>`;
            } else {
                html += '<td></td>';
            }
        });
        html += '</tr>';
    });
    
    html += '</tbody></table>';
    return html;
}
```

**4. æŸ¥è¯¢æˆç»©**

```javascript
function getMyGrades(studentId) {
    // åªèƒ½æŸ¥çœ‹å·²å‘å¸ƒçš„æˆç»©
    const grades = JSON.parse(localStorage.getItem('edu_grades')) || [];
    const publishedGrades = grades.filter(g => g.published === true);
    
    // è·å–æˆ‘é€‰çš„è¯¾ç¨‹
    const studentCourses = JSON.parse(localStorage.getItem('edu_student_courses')) || {};
    const myCourses = studentCourses[studentId] || [];
    
    // ç­›é€‰å‡ºæˆ‘çš„è¯¾ç¨‹çš„æˆç»©
    const myGrades = publishedGrades.filter(g => myCourses.includes(g.courseCode));
    
    return myGrades;
}

// è®¡ç®—ç»©ç‚¹
function calculateGPA(grades) {
    const courses = JSON.parse(localStorage.getItem('edu_courses')) || [];
    
    let totalCredits = 0;
    let totalPoints = 0;
    
    grades.forEach(grade => {
        const course = courses.find(c => c.code === grade.courseCode);
        if (course && grade.scores.length > 0) {
            const score = grade.scores[0]; // å‡è®¾ç¬¬ä¸€ä¸ªæ˜¯è¯¥å­¦ç”Ÿçš„æˆç»©
            const gradePoint = scoreToGradePoint(score);
            totalCredits += course.credits;
            totalPoints += gradePoint * course.credits;
        }
    });
    
    return totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : 0;
}

function scoreToGradePoint(score) {
    if (score >= 90) return 4.0;
    if (score >= 85) return 3.7;
    if (score >= 82) return 3.3;
    if (score >= 78) return 3.0;
    if (score >= 75) return 2.7;
    if (score >= 72) return 2.3;
    if (score >= 68) return 2.0;
    if (score >= 64) return 1.5;
    if (score >= 60) return 1.0;
    return 0;
}
```

---

### æ•™å¸ˆç«¯ï¼ˆæ¨¡å—â‘¢ï¼‰å¯¹æ¥

#### éœ€è¦è¯»å–çš„æ•°æ®

1. **`edu_schedules`** - æŸ¥çœ‹è‡ªå·±ä»»æ•™çš„è¯¾ç¨‹
2. **`edu_student_courses`** - æŸ¥çœ‹å“ªäº›å­¦ç”Ÿé€‰äº†è‡ªå·±çš„è¯¾
3. **`edu_students`** - å­¦ç”ŸåŸºç¡€ä¿¡æ¯
4. **`edu_courses`** - è¯¾ç¨‹ä¿¡æ¯

#### éœ€è¦å†™å…¥çš„æ•°æ®

1. **`edu_grades`** - å½•å…¥æˆç»©ï¼ˆ`published: false`ï¼‰

#### æ ¸å¿ƒåŠŸèƒ½å®ç°

**1. æŸ¥çœ‹ä»»æ•™è¯¾ç¨‹**

```javascript
function getMyCourses(teacherName) {
    // è·å–æ‰€æœ‰æ’è¯¾
    const schedules = JSON.parse(localStorage.getItem('edu_schedules')) || [];
    
    // ç­›é€‰å‡ºæˆ‘æ•™çš„è¯¾ç¨‹
    const myCourses = schedules.filter(s => s.teacher === teacherName);
    
    return myCourses;
}
```

**2. æŸ¥çœ‹é€‰è¯¾å­¦ç”Ÿ**

```javascript
function getCourseStudents(courseCode) {
    // è·å–æ‰€æœ‰é€‰è¯¾è®°å½•
    const studentCourses = JSON.parse(localStorage.getItem('edu_student_courses')) || {};
    
    // æ‰¾å‡ºé€‰äº†è¿™é—¨è¯¾çš„å­¦ç”Ÿ
    const enrolledStudentIds = Object.entries(studentCourses)
        .filter(([studentId, courses]) => courses.includes(courseCode))
        .map(([studentId]) => studentId);
    
    // è·å–å­¦ç”Ÿè¯¦ç»†ä¿¡æ¯
    const students = JSON.parse(localStorage.getItem('edu_students')) || [];
    const enrolledStudents = students.filter(s => enrolledStudentIds.includes(s.id));
    
    return enrolledStudents;
}

// æ˜¾ç¤ºå­¦ç”Ÿåˆ—è¡¨
function renderStudentList(courseCode) {
    const students = getCourseStudents(courseCode);
    
    let html = '<table><thead><tr><th>å­¦å·</th><th>å§“å</th><th>ç­çº§</th><th>ä¸“ä¸š</th></tr></thead><tbody>';
    students.forEach(s => {
        html += `<tr>
            <td>${s.id}</td>
            <td>${s.name}</td>
            <td>${s.class}</td>
            <td>${s.major}</td>
        </tr>`;
    });
    html += '</tbody></table>';
    
    return html;
}
```

**3. å½•å…¥æˆç»©**

```javascript
function submitGrades(courseCode, courseName, teacherName, scoresArray) {
    // è¯»å–æˆç»©æ•°æ®
    const grades = JSON.parse(localStorage.getItem('edu_grades')) || [];
    
    // æ£€æŸ¥æ˜¯å¦å·²ç»å½•å…¥è¿‡è¿™é—¨è¯¾çš„æˆç»©
    const existingIndex = grades.findIndex(g => g.courseCode === courseCode);
    
    const gradeRecord = {
        courseCode: courseCode,
        courseName: courseName,
        teacher: teacherName,
        studentCount: scoresArray.length,
        scores: scoresArray,
        published: false  // å½•å…¥åé»˜è®¤æœªå‘å¸ƒ
    };
    
    if (existingIndex !== -1) {
        // æ›´æ–°å·²æœ‰æˆç»©
        grades[existingIndex] = gradeRecord;
    } else {
        // æ·»åŠ æ–°æˆç»©
        grades.push(gradeRecord);
    }
    
    localStorage.setItem('edu_grades', JSON.stringify(grades));
    
    // è®°å½•æ“ä½œæ—¥å¿—
    addLog(teacherName, `å½•å…¥æˆç»© - ${courseCode}`);
    
    return true;
}

// æ‰¹é‡å¯¼å…¥æˆç»©ï¼ˆä»Excelï¼‰
function importGradesFromExcel(courseCode, courseName, teacherName) {
    // å‡è®¾ä»æ–‡ä»¶è¯»å–å™¨è·å–æ•°æ®
    const fileInput = document.getElementById('gradeFile');
    const file = fileInput.files[0];
    
    if (!file) {
        alert('è¯·é€‰æ‹©æ–‡ä»¶ï¼');
        return;
    }
    
    // ä½¿ç”¨ FileReader è¯»å–æ–‡ä»¶ï¼ˆéœ€è¦é…åˆ XLSX.js åº“ï¼‰
    const reader = new FileReader();
    reader.onload = function(e) {
        // è§£æExcelï¼Œæå–æˆç»©æ•°ç»„
        const scoresArray = parseExcelData(e.target.result);
        
        // æäº¤æˆç»©
        submitGrades(courseCode, courseName, teacherName, scoresArray);
        alert('æˆç»©å¯¼å…¥æˆåŠŸï¼');
    };
    reader.readAsArrayBuffer(file);
}
```

**4. æˆç»©ç»Ÿè®¡**

```javascript
function analyzeGrades(courseCode) {
    const grades = JSON.parse(localStorage.getItem('edu_grades')) || [];
    const courseGrade = grades.find(g => g.courseCode === courseCode);
    
    if (!courseGrade) {
        return null;
    }
    
    const scores = courseGrade.scores;
    const total = scores.reduce((sum, s) => sum + s, 0);
    const average = total / scores.length;
    
    // æˆç»©åˆ†å¸ƒ
    const distribution = {
        excellent: scores.filter(s => s >= 90).length,  // ä¼˜ç§€
        good: scores.filter(s => s >= 80 && s < 90).length,  // è‰¯å¥½
        medium: scores.filter(s => s >= 70 && s < 80).length,  // ä¸­ç­‰
        pass: scores.filter(s => s >= 60 && s < 70).length,  // åŠæ ¼
        fail: scores.filter(s => s < 60).length  // ä¸åŠæ ¼
    };
    
    return {
        average: average.toFixed(2),
        highest: Math.max(...scores),
        lowest: Math.min(...scores),
        passRate: ((scores.filter(s => s >= 60).length / scores.length) * 100).toFixed(1),
        excellentRate: ((scores.filter(s => s >= 85).length / scores.length) * 100).toFixed(1),
        distribution
    };
}
```

---

### ç³»ç»Ÿç®¡ç†ç«¯ï¼ˆæ¨¡å—â‘¤ï¼‰å¯¹æ¥

#### éœ€è¦è¯»å–çš„æ•°æ®

1. **`grade_logs`** - æ“ä½œæ—¥å¿—

#### éœ€è¦å†™å…¥çš„æ•°æ®

1. **`grade_logs`** - è®°å½•æ‰€æœ‰é‡è¦æ“ä½œ

#### æ ¸å¿ƒåŠŸèƒ½å®ç°

**1. æŸ¥è¯¢æ“ä½œæ—¥å¿—**

```javascript
// è·å–æ‰€æœ‰æ—¥å¿—
function getAllLogs() {
    const logs = JSON.parse(localStorage.getItem('grade_logs')) || [];
    return logs.sort((a, b) => b.id - a.id); // æŒ‰æ—¶é—´å€’åº
}

// æŒ‰ç”¨æˆ·ç­›é€‰æ—¥å¿—
function getLogsByUser(userId) {
    const logs = getAllLogs();
    return logs.filter(log => log.user === userId);
}

// æŒ‰æ—¶é—´èŒƒå›´ç­›é€‰æ—¥å¿—
function getLogsByTimeRange(startTime, endTime) {
    const logs = getAllLogs();
    return logs.filter(log => {
        const logTime = new Date(log.time).getTime();
        return logTime >= startTime && logTime <= endTime;
    });
}

// æŒ‰æ“ä½œç±»å‹ç­›é€‰æ—¥å¿—
function getLogsByAction(actionKeyword) {
    const logs = getAllLogs();
    return logs.filter(log => log.action.includes(actionKeyword));
}
```

**2. æ•°æ®å¤‡ä»½**

```javascript
function backupData() {
    const backup = {
        timestamp: new Date().toISOString(),
        data: {
            students: localStorage.getItem('edu_students'),
            teachers: localStorage.getItem('edu_teachers'),
            courses: localStorage.getItem('edu_courses'),
            classes: localStorage.getItem('edu_classes'),
            schedules: localStorage.getItem('edu_schedules'),
            studentCourses: localStorage.getItem('edu_student_courses'),
            grades: localStorage.getItem('edu_grades'),
            users: localStorage.getItem('grade_users'),
            logs: localStorage.getItem('grade_logs')
        }
    };
    
    // è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²
    const backupJson = JSON.stringify(backup, null, 2);
    
    // ä¸‹è½½ä¸ºæ–‡ä»¶
    const blob = new Blob([backupJson], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `backup_${Date.now()}.json`;
    a.click();
    
    // è®°å½•æ—¥å¿—
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    addLog(currentUser.id, 'æ•°æ®å¤‡ä»½');
    
    return true;
}
```

**3. æ•°æ®æ¢å¤**

```javascript
function restoreData(backupFile) {
    const reader = new FileReader();
    
    reader.onload = function(e) {
        try {
            const backup = JSON.parse(e.target.result);
            
            if (!backup.data) {
                alert('å¤‡ä»½æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼');
                return;
            }
            
            // æ¢å¤æ‰€æœ‰æ•°æ®
            Object.entries(backup.data).forEach(([key, value]) => {
                if (value) {
                    localStorage.setItem(key, value);
                }
            });
            
            alert(`æ•°æ®å·²æ¢å¤åˆ° ${backup.timestamp}`);
            
            // è®°å½•æ—¥å¿—
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            addLog(currentUser.id, `æ•°æ®æ¢å¤ - ${backup.timestamp}`);
            
            // åˆ·æ–°é¡µé¢
            location.reload();
        } catch (error) {
            alert('æ¢å¤å¤±è´¥ï¼š' + error.message);
        }
    };
    
    reader.readAsText(backupFile);
}
```

---

## ğŸ’» ç¤ºä¾‹ä»£ç 

### é€šç”¨å·¥å…·å‡½æ•°

```javascript
/**
 * å®‰å…¨è¯»å– localStorage æ•°æ®
 * @param {string} key - localStorage é”®å
 * @param {any} defaultValue - é»˜è®¤å€¼
 * @returns {any} è§£æåçš„æ•°æ®
 */
function safeGetLocalStorage(key, defaultValue = []) {
    try {
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : defaultValue;
    } catch (error) {
        console.error(`è¯»å– ${key} å¤±è´¥:`, error);
        return defaultValue;
    }
}

/**
 * å®‰å…¨å†™å…¥ localStorage æ•°æ®
 * @param {string} key - localStorage é”®å
 * @param {any} data - è¦å­˜å‚¨çš„æ•°æ®
 * @returns {boolean} æ˜¯å¦æˆåŠŸ
 */
function safeSetLocalStorage(key, data) {
    try {
        localStorage.setItem(key, JSON.stringify(data));
        return true;
    } catch (error) {
        console.error(`å†™å…¥ ${key} å¤±è´¥:`, error);
        return false;
    }
}

/**
 * æ·»åŠ æ“ä½œæ—¥å¿—
 * @param {string} userId - ç”¨æˆ·ID
 * @param {string} action - æ“ä½œæè¿°
 */
function addLog(userId, action) {
    const logs = safeGetLocalStorage('grade_logs', []);
    logs.push({
        id: Date.now(),
        user: userId,
        action: action,
        time: new Date().toISOString()
    });
    safeSetLocalStorage('grade_logs', logs);
}

/**
 * æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
 * @param {string} isoString - ISOæ ¼å¼æ—¶é—´å­—ç¬¦ä¸²
 * @returns {string} æ ¼å¼åŒ–åçš„æ—¶é—´
 */
function formatDateTime(isoString) {
    const date = new Date(isoString);
    return date.toLocaleString('zh-CN', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    });
}
```

### æ•°æ®éªŒè¯å‡½æ•°

```javascript
/**
 * éªŒè¯å­¦ç”Ÿæ•°æ®
 */
function validateStudent(student) {
    if (!student.id || !/^S\d{7}$/.test(student.id)) {
        return { valid: false, error: 'å­¦å·æ ¼å¼é”™è¯¯ï¼Œåº”ä¸ºSå¼€å¤´çš„7ä½æ•°å­—' };
    }
    if (!student.name || student.name.length < 2) {
        return { valid: false, error: 'å§“åä¸èƒ½ä¸ºç©ºä¸”è‡³å°‘2ä¸ªå­—ç¬¦' };
    }
    if (!student.class) {
        return { valid: false, error: 'ç­çº§ä¸èƒ½ä¸ºç©º' };
    }
    if (!student.year || student.year < 2000 || student.year > new Date().getFullYear()) {
        return { valid: false, error: 'å…¥å­¦å¹´ä»½ä¸åˆç†' };
    }
    return { valid: true };
}

/**
 * éªŒè¯è¯¾ç¨‹ä»£ç 
 */
function validateCourseCode(code) {
    return /^[A-Z]{2}\d{3}$/.test(code); // ä¾‹å¦‚ï¼šCS101
}

/**
 * éªŒè¯å­¦æœŸæ ¼å¼
 */
function validateSemester(semester) {
    return /^\d{4}-\d{4}-[12]$/.test(semester); // ä¾‹å¦‚ï¼š2024-2025-1
}
```

---

## ğŸ”‘ æµ‹è¯•è´¦å·

### é»˜è®¤æµ‹è¯•è´¦å·

| è§’è‰² | è´¦å· | å¯†ç  | è¯´æ˜ |
|-----|------|------|------|
| å­¦ç”Ÿ | S2021001 | password | å¼ ä¸‰ - è®¡ç®—æœº2101 |
| å­¦ç”Ÿ | S2021002 | password | æå›› - è®¡ç®—æœº2101 |
| æ•™å¸ˆ | T001 | password | ç‹æ•™æˆ - è®¡ç®—æœºå­¦é™¢ |
| æ•™å¸ˆ | T002 | password | èµµè€å¸ˆ - è®¡ç®—æœºå­¦é™¢ |
| æ•™å­¦ç®¡ç†å‘˜ | TA001 | password | æ•™å­¦ç§˜ä¹¦ |
| ç³»ç»Ÿç®¡ç†å‘˜ | SA001 | password | ç³»ç»Ÿç®¡ç†å‘˜ |

### æµ‹è¯•æ•°æ®è¯´æ˜

- **8åå­¦ç”Ÿ**ï¼šS2021001 ~ S2021005, S2022001 ~ S2022003
- **4ä½æ•™å¸ˆ**ï¼šT001 ~ T004
- **5é—¨è¯¾ç¨‹**ï¼šCS101, CS102, CS103, SE101, MA101
- **5ä¸ªç­çº§**ï¼šè®¡ç®—æœº2101ã€è®¡ç®—æœº2102ã€è½¯ä»¶2101ã€è®¡ç®—æœº2201ã€æ•°æ®2201
- **ç¬¬ä¸€å­¦æœŸæ’è¯¾**ï¼š5é—¨è¯¾
- **ç¬¬äºŒå­¦æœŸæ’è¯¾**ï¼š3é—¨è¯¾

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•åˆå§‹åŒ–/é‡ç½®æ•°æ®ï¼Ÿ

**A:** æœ‰ä¸‰ç§æ–¹æ³•ï¼š

```javascript
// æ–¹æ³•1ï¼šæ¸…é™¤æ‰€æœ‰æ•°æ®ï¼ˆæ…ç”¨ï¼ï¼‰
localStorage.clear();
location.reload();

// æ–¹æ³•2ï¼šåªæ¸…é™¤æ•™å­¦ç®¡ç†ç«¯æ•°æ®
localStorage.removeItem('edu_students');
localStorage.removeItem('edu_teachers');
localStorage.removeItem('edu_courses');
localStorage.removeItem('edu_schedules');
localStorage.removeItem('edu_student_courses');
localStorage.removeItem('edu_grades');
location.reload();

// æ–¹æ³•3ï¼šä½¿ç”¨æ•™å­¦ç®¡ç†ç«¯çš„"é‡ç½®æ’è¯¾æ•°æ®"æŒ‰é’®
```

### Q2: å­¦æœŸåˆ‡æ¢åçœ‹ä¸åˆ°æ•°æ®ï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. ç¡®è®¤æ’è¯¾æ•°æ®ä¸­åŒ…å« `semester` å­—æ®µ
2. ç¡®è®¤å­¦æœŸæ ¼å¼æ­£ç¡®ï¼š`'2024-2025-1'` æˆ– `'2024-2025-2'`
3. ä½¿ç”¨æµè§ˆå™¨ Console æ£€æŸ¥æ•°æ®ï¼š

```javascript
const schedules = JSON.parse(localStorage.getItem('edu_schedules'));
console.log(schedules);
// ç¡®è®¤æ¯ä¸ªæ’è¯¾è®°å½•éƒ½æœ‰ semester å­—æ®µ
```

### Q3: å·²é€‰äººæ•°æ˜¾ç¤ºä¸æ­£ç¡®ï¼Ÿ

**A:** å·²é€‰äººæ•°æ˜¯æ ¹æ® `edu_student_courses` è‡ªåŠ¨è®¡ç®—çš„ï¼Œæ£€æŸ¥ï¼š

1. å­¦ç”Ÿé€‰è¯¾åæ˜¯å¦æ­£ç¡®æ›´æ–°äº† `edu_student_courses`
2. è¯¾ç¨‹ä»£ç æ˜¯å¦ä¸€è‡´ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰

```javascript
// è°ƒè¯•ä»£ç 
const studentCourses = JSON.parse(localStorage.getItem('edu_student_courses'));
console.log(studentCourses);

// æ‰‹åŠ¨ç»Ÿè®¡æŸé—¨è¯¾çš„å·²é€‰äººæ•°
const courseCode = 'CS101';
let count = 0;
Object.values(studentCourses).forEach(courses => {
    if (courses.includes(courseCode)) count++;
});
console.log(`${courseCode} å·²é€‰äººæ•°ï¼š${count}`);
```

### Q4: æˆç»©ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°ï¼Ÿ

**A:** å­¦ç”Ÿç«¯åªèƒ½çœ‹åˆ° `published: true` çš„æˆç»©ï¼š

```javascript
// æ£€æŸ¥æˆç»©å‘å¸ƒçŠ¶æ€
const grades = JSON.parse(localStorage.getItem('edu_grades'));
console.log(grades);

// æ•™å­¦ç®¡ç†ç«¯å‘å¸ƒæˆç»©
const gradeIndex = grades.findIndex(g => g.courseCode === 'CS101');
if (gradeIndex !== -1) {
    grades[gradeIndex].published = true;
    localStorage.setItem('edu_grades', JSON.stringify(grades));
}
```

### Q5: å¦‚ä½•æŸ¥çœ‹æ‰€æœ‰localStorageæ•°æ®ï¼Ÿ

**A:** ä½¿ç”¨æµè§ˆå™¨ Consoleï¼š

```javascript
// æŸ¥çœ‹æ‰€æœ‰é”®å
Object.keys(localStorage);

// æŸ¥çœ‹æ‰€æœ‰æ•°æ®
for (let key in localStorage) {
    console.log(key, localStorage.getItem(key));
}

// æŸ¥çœ‹ç‰¹å®šæ•°æ®
console.table(JSON.parse(localStorage.getItem('edu_students')));
```

### Q6: æ•°æ®ä¸¢å¤±äº†æ€ä¹ˆåŠï¼Ÿ

**A:** 

1. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ¸…é™¤äº†ç¼“å­˜
2. ä½¿ç”¨ç³»ç»Ÿç®¡ç†ç«¯çš„"æ•°æ®æ¢å¤"åŠŸèƒ½
3. é‡æ–°åˆå§‹åŒ–æ•°æ®ï¼ˆåˆ·æ–°é¡µé¢ä¼šè‡ªåŠ¨åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®ï¼‰

### Q7: å¦‚ä½•è°ƒè¯•æ•°æ®åŒæ­¥é—®é¢˜ï¼Ÿ

**A:** 

```javascript
// æ·»åŠ ç›‘å¬å™¨ï¼Œå®æ—¶æŸ¥çœ‹æ•°æ®å˜åŒ–
window.addEventListener('storage', function(e) {
    console.log('localStorage æ•°æ®å˜åŒ–ï¼š');
    console.log('é”®å:', e.key);
    console.log('æ—§å€¼:', e.oldValue);
    console.log('æ–°å€¼:', e.newValue);
});

// æˆ–è€…å®šæ—¶æ£€æŸ¥
setInterval(() => {
    const data = localStorage.getItem('edu_student_courses');
    console.log('å½“å‰é€‰è¯¾æ•°æ®:', JSON.parse(data));
}, 5000);
```

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š

- **æ•™å­¦ç®¡ç†ç«¯è´Ÿè´£äºº**ï¼ˆä½ ï¼‰
- **æŠ€æœ¯è®¨è®ºç¾¤**ï¼š[å¾…å»ºç«‹]
- **æ–‡æ¡£æ›´æ–°**ï¼šè¯·åŠæ—¶åŒæ­¥ç»™æ‰€æœ‰é˜Ÿå‹

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0 (2024-12-22)

- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®Œæ•´çš„æ•°æ®ç»“æ„å®šä¹‰
- âœ… å„æ¨¡å—å¯¹æ¥è¯´æ˜
- âœ… ç¤ºä¾‹ä»£ç å’Œæµ‹è¯•è´¦å·
- âœ… å¸¸è§é—®é¢˜è§£ç­”

---

## âš ï¸ æœ€åæé†’

1. **æ•°æ®å®‰å…¨**ï¼šä¿®æ”¹æ•°æ®å‰ä¸€å®šè¦å…ˆè¯»å–å®Œæ•´æ•°æ®
2. **å‘½åè§„èŒƒ**ï¼šä¸¥æ ¼æŒ‰ç…§æ–‡æ¡£ä¸­çš„å­—æ®µå
3. **å­¦æœŸå­—æ®µ**ï¼šæ‰€æœ‰æ’è¯¾ç›¸å…³çš„æ“ä½œå¿…é¡»åŒ…å« `semester`
4. **æˆç»©å‘å¸ƒ**ï¼šæ•™å¸ˆå½•å…¥æˆç»©é»˜è®¤ `published: false`ï¼Œéœ€æ•™å­¦ç®¡ç†ç«¯å®¡æ ¸å‘å¸ƒ
5. **æ“ä½œæ—¥å¿—**ï¼šæ‰€æœ‰é‡è¦æ“ä½œéƒ½åº”è¯¥è®°å½•æ—¥å¿—
6. **æ•°æ®éªŒè¯**ï¼šå†™å…¥æ•°æ®å‰è¿›è¡Œå¿…è¦çš„æ ¼å¼éªŒè¯
7. **é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨ try-catch åŒ…è£¹æ‰€æœ‰ JSON æ“ä½œ
8. **å®šæœŸå¤‡ä»½**ï¼šé‡è¦æ•°æ®åŠæ—¶å¤‡ä»½

---

**ç¥å¤§å®¶å¼€å‘é¡ºåˆ©ï¼ğŸ‰**

